<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.js"></script>
  <title>생활코딩 리덕스</title>
</head>
<body>
  <!-- 리덕스를 이용해서 CRUD 중 Create, Delete 기능을 만들어 보자  -->
  <div id="subject"></div>
  <div id="toc"></div>
  <div id="control"></div>
  <div id="content"></div>

  <script>
    function subject() {
      document.querySelector("#subject").innerHTML = `
      <header>
        <h1>WEB</h1>
          Hello, WEB!
      </header> 
      `
    }
  

    // redux의 store에 있는 내용을 바탕으로 아래 HTML을 수정하려고 한다. 
    function TOC(){

     // getState로 state값을 가져올 수 있다. >> 직접 수정하지 못하도록 state 보호! 
      let state = store.getState();
      let i = 0;
      let liTags = '';
      while(i<state.contents.length){
        liTags = liTags + `
            <li>
              <a href="${state.contents[i].id}">
                ${state.contents[i].title}
              </a>
              </li>
            `;
        i = i + 1;
      }

      document.querySelector("#toc").innerHTML = `
      <nav>
        <ol>${liTags}</ol>
      </nav>
      `
    }
    

    function control(){
      document.querySelector('#control').innerHTML = `
      <ul>
        <li><a href="/create">create</a></li>
        <li><input type="button" value="delete"></li>
      </ul>
      `
    }
    
    function article(){
      document.querySelector('#content').innerHTML = `
      <article>
        <h2>HTML</h2>
        HTML is ...
      </article>
      `
    }
    // 리덕스를 이용하기 위해 먼저 store를 만들어야한다. 
    // 리덕스 함수를 호출할 때 꼭 써줘야하는 함수가 reducer함수, 
    // reducer함수는 이전의 state값과 호출된 이후의 action값을 파라미터로 받는다.
    //  reducer함수가 return하는 값은 새로운 state값이 된다. 

    function reducer(state, action){
      // store를 처음 최초 생성하면 최초 1회 action과는 상관없이 state값이 호출되는데 
      // 그때 state값이 undefined인데 이떄 초기값을 세팅할 수 있다. 

        if( state == undefined){
          // 여기서 최초로 애플리케이션이 필요로할만한 값을 넣어주면 된다. 
          return {
            contents:[
                {id:1, title:'HTML', desc: 'HTML is ..'},
                {id:2, title:'CSS', desc: 'CSS is ..'},
          ]

          }
        }
        return 
    }
    // 만들어진 스토어를 변수로 만들어서 전역에서 사용할 수 있는 변수로 만듬. 
    let store = Redux.createStore(reducer);
    

    subject();
    TOC();
    control();
    article();


  </script>
  
  
  
  
</body>
</html>